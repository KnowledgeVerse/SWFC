<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Bulletin Footer</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <style>
      /* CSS Variables for easy color management */
      :root {
        --bg-impact: #ffff00;
        --bg-suggestion: #90ee90;
        --bg-no-warning: #90ee90; /* Light Green */
        --bg-watch: #ffff00; /* Yellow */
        --bg-alert: #ffa500; /* Orange */
        --bg-warning: #ff0000; /* Red */

        /* Blue shades for rainfall */
        --bg-rain-1: #e6f7ff;
        --bg-rain-2: #b3d9ff;
        --bg-rain-3: #80bfff;
        --bg-rain-4: #4da6ff;
        --bg-rain-5: #0080ff;

        --border-color: #000;
        --text-main: #000;
      }

      body {
        font-family: "Arial", sans-serif;
        margin: 0;
        padding: 20px;
        padding-bottom: 20px;
        background-color: #fff;
        color: var(--text-main);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        flex: 1;
        width: 100%;
      }

      /* Table Styles */
      table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        border: 1px solid var(--border-color);
        font-size: 14px;
      }

      th,
      td {
        border: 1px solid var(--border-color);
        padding: 8px;
        vertical-align: middle;
      }

      /* Table 1: Impact & Suggestion */
      .table-impact th {
        text-align: center;
        font-weight: bold;
        background-color: #f0f0f0;
      }

      .col-impact {
        background-color: var(--bg-impact);
        width: 50%;
      }

      .col-suggestion {
        background-color: var(--bg-suggestion);
        width: 50%;
      }

      /* Table 2: Terminology */
      .table-terminology th {
        text-align: center;
        font-weight: bold;
        background-color: #f0f0f0;
      }

      .term-cell {
        text-align: center;
        font-weight: bold;
      }

      /* Rainfall Distribution Backgrounds */
      .rain-dry {
        background-color: #fff;
      }
      .rain-isol {
        background-color: var(--bg-rain-2);
      }
      .rain-sct {
        background-color: var(--bg-rain-3);
      }
      .rain-fws {
        background-color: var(--bg-rain-4);
      }
      .rain-ws {
        background-color: var(--bg-rain-5);
        color: white;
      }

      /* Warning Colors */
      .warn-green {
        background-color: var(--bg-no-warning);
      }
      .warn-yellow {
        background-color: var(--bg-watch);
      }
      .warn-orange {
        background-color: var(--bg-alert);
      }
      .warn-red {
        background-color: var(--bg-warning);
        color: white;
      }

      /* Footer Controls */
      .footer-section {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
        border-top: 2px solid #eee;
        padding-top: 20px;
        flex-wrap: wrap;
        gap: 20px;
      }

      .control-box {
        flex: 1;
        min-width: 300px;
      }

      .control-box label {
        display: block;
        font-weight: bold;
        margin-bottom: 8px;
        color: #333;
      }

      .control-box select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 14px;
        background-color: #f9f9f9;
        cursor: pointer;
      }

      .display-name {
        margin-top: 10px;
        font-weight: bold;
        font-size: 16px;
        color: #000;
        padding: 5px;
        border-bottom: 1px solid #000;
        display: inline-block;
        min-width: 200px;
      }

      /* Official Footer Note */
      .official-footer-note {
        width: 100%;
        text-align: center;
        font-family: "Times New Roman", "Noto Sans Devanagari", serif;
        font-size: 12px;
        color: #333333;
        border-top: 1px solid #000;
        margin-top: 30px;
        padding-top: 10px;
      }

      /* Navigation Toolbar */
      .toggle-btn {
        text-decoration: none;
        color: #fff;
        background-color: #6c757d;
        padding: 8px 15px;
        border-radius: 5px;
        font-weight: bold;
        transition: background 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
        border: none;
        cursor: pointer;
        font-size: 14px;
      }
      .toggle-btn:hover {
        background-color: #5a6268;
      }
      .toggle-btn.active {
        background-color: #0056b3;
      }
      .btn-blink-anim {
        animation: blink-pulse 2s infinite;
        background-color: #ff9800 !important;
        color: white !important;
      }
      @keyframes blink-pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 152, 0, 0.7);
          transform: scale(1);
        }
        50% {
          box-shadow: 0 0 0 10px rgba(255, 152, 0, 0);
          transform: scale(1.05);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(255, 152, 0, 0);
          transform: scale(1);
        }
      }

      /* Print Friendly */
      @media print {
        body {
          -webkit-print-color-adjust: exact;
          print-color-adjust: exact;
          padding-bottom: 0;
        }
        .official-footer-note {
          margin-top: 20px;
        }
        select {
          display: none; /* Hide dropdown in print */
        }
        .display-name {
          border: none; /* Remove underline in print if desired, or keep it */
          padding: 0;
        }
        .control-box label {
          margin-bottom: 5px;
        }
        .nav-toolbar {
          display: none !important;
        }
      }

      /* Responsive */
      @media (max-width: 768px) {
        .footer-section {
          flex-direction: column;
        }
        th,
        td {
          font-size: 12px;
          padding: 5px;
        }
      }
    </style>
  </head>
  <body>
    <div
      class="nav-toolbar"
      style="
        display: flex;
        gap: 5px;
        flex-wrap: wrap;
        justify-content: center;
        padding: 10px;
        margin-bottom: 10px;
      "
    >
      <a href="index.html" class="toggle-btn btn-blink-anim" title="Home"
        ><i class="fas fa-home"></i
      ></a>
      <a href="live.html" class="toggle-btn" title="Live Preview"
        ><i class="fas fa-tower-broadcast"></i
      ></a>
      <a href="temp.html" class="toggle-btn" title="Live Temp"
        ><i class="fas fa-thermometer-half"></i
      ></a>
      <a href="wind.html" class="toggle-btn" title="Wind"
        ><i class="fas fa-wind"></i
      ></a>
      <a href="rain.html" class="toggle-btn" title="Rain"
        ><i class="fas fa-cloud-showers-heavy"></i
      ></a>
      <a href="humidity.html" class="toggle-btn" title="Humidity"
        ><i class="fas fa-tint"></i
      ></a>
      <a href="display.html" class="toggle-btn" title="Display Mode"
        ><i class="fas fa-tv"></i
      ></a>
      <div style="width: 1px; background: #ccc; margin: 0 5px"></div>
      <a
        href="bulletin.html"
        class="toggle-btn btn-blink-anim"
        title="Weather Bulletin"
        ><i class="fas fa-clipboard-list"></i
      ></a>
      <a
        href="Generate_Weather_Bulletin.html"
        class="toggle-btn"
        title="Generate_Weather_Bulletin"
        ><i class="fas fa-file-lines"></i
      ></a>
      <a href="max_min_rh.html" class="toggle-btn" title="Observed Data"
        ><i class="fas fa-table"></i
      ></a>
      <a href="Weather_summary.html" class="toggle-btn" title="Weather Summary"
        ><i class="fas fa-file-alt"></i
      ></a>
      <a
        href="Detailed_Weather_Forecast.html"
        class="toggle-btn"
        title="Detailed Forecast"
        ><i class="fas fa-list-alt"></i
      ></a>
      <a
        href="Weather_Warning_Table.html"
        class="toggle-btn"
        title="Warning Table"
        ><i class="fas fa-table"></i
      ></a>
      <a href="bulk_import.html" class="toggle-btn" title="Import Data"
        ><i class="fas fa-file-import"></i
      ></a>
      <a
        href="Temperature_Forecast.html"
        class="toggle-btn"
        title="Min/Max Temp"
        ><i class="fas fa-temperature-high"></i
      ></a>
      <a href="forecast.html" class="toggle-btn" title="7-Day Forecast"
        ><i class="fas fa-calendar-day"></i
      ></a>
      <a href="warning.html" class="toggle-btn" title="7-Day Warning"
        ><i class="fas fa-exclamation-triangle"></i
      ></a>
      <a
        href="bulletin_footer.html"
        class="toggle-btn active"
        title="Bulletin Footer"
        ><i class="fas fa-file-signature"></i
      ></a>
    </div>

    <div class="container">
      <!-- Table 1: Impact & Suggestion -->
      <table class="table-impact">
        <thead>
          <tr>
            <th colspan="2" style="font-size: 1.1em; padding: 10px">
              इस मौसम के संभावित प्रभाव / सुझाव (Expected Impact & Action
              Suggested)
            </th>
          </tr>
          <tr>
            <th class="col-impact">प्रभाव (Impact)</th>
            <th class="col-suggestion">सुझाव (Action Suggested)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="col-impact">
              <ul>
                <li>
                  खड़ी फसलों को नुकसान हो सकता है। (Damage to standing crops
                  likely.)
                </li>
                <li>
                  कच्चे मकानों और झोपड़ियों को नुकसान। (Damage to kutcha
                  houses/huts.)
                </li>
                <li>दृश्यता में कमी। (Reduction in visibility.)</li>
                <li>यातायात में बाधा। (Traffic disruption.)</li>
              </ul>
            </td>
            <td class="col-suggestion">
              <ul>
                <li>खेतों में काम करने से बचें। (Avoid working in fields.)</li>
                <li>
                  पेड़ों के नीचे शरण न लें। (Do not take shelter under trees.)
                </li>
                <li>
                  मौसम की जानकारी से अपडेट रहें। (Stay updated with weather
                  info.)
                </li>
                <li>सुरक्षित स्थानों पर रहें। (Stay in safe places.)</li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Table 2: Terminology -->
      <table class="table-terminology">
        <thead>
          <tr>
            <th colspan="4" style="font-size: 1.1em; padding: 10px">
              पूर्वानुमान में प्रयुक्त शब्दावली / Terminology used in forecast
            </th>
          </tr>
        </thead>
        <tbody>
          <!-- Headers for sub-sections -->
          <tr>
            <th colspan="2" style="width: 50%">
              वर्षा का वितरण (Rainfall Distribution)
            </th>
            <th colspan="2" style="width: 50%">
              चेतावनी रंग (Warning Colour Codes)
            </th>
          </tr>
          <!-- Content Rows -->
          <tr>
            <td class="term-cell rain-ws">
              Widespread (WS) / अधिकांश स्थानों पर
            </td>
            <td class="term-cell">76 - 100 %</td>
            <td class="term-cell warn-red">Red (Warning)</td>
            <td class="term-cell">Take Action (कार्रवाई करें)</td>
          </tr>
          <tr>
            <td class="term-cell rain-fws">
              Fairly Widespread (FWS) / अनेक स्थानों पर
            </td>
            <td class="term-cell">51 - 75 %</td>
            <td class="term-cell warn-orange">Orange (Alert)</td>
            <td class="term-cell">Be Prepared (तैयार रहें)</td>
          </tr>
          <tr>
            <td class="term-cell rain-sct">Scattered (SCT) / कुछ स्थानों पर</td>
            <td class="term-cell">26 - 50 %</td>
            <td class="term-cell warn-yellow">Yellow (Watch)</td>
            <td class="term-cell">Be Updated (अपडेट रहें)</td>
          </tr>
          <tr>
            <td class="term-cell rain-isol">
              Isolated (ISOL) / एक या दो स्थानों पर
            </td>
            <td class="term-cell">1 - 25 %</td>
            <td class="term-cell warn-green">Green (No Warning)</td>
            <td class="term-cell">No Action (कोई कार्रवाई नहीं)</td>
          </tr>
          <tr>
            <td class="term-cell rain-dry">Dry (DRY) / शुष्क</td>
            <td class="term-cell">0 %</td>
            <td colspan="2" style="background-color: #f9f9f9"></td>
          </tr>
        </tbody>
      </table>

      <!-- Footer Controls (Dropdowns) -->
      <div class="footer-section">
        <!-- Duty Officer -->
        <div class="control-box">
          <label for="dutyOfficerSelect">Duty Officer:</label>
          <div style="display: flex; gap: 5px">
            <select
              id="dutyOfficerSelect"
              onchange="
                updateDisplay('dutyOfficerSelect', 'dutyOfficerDisplay')
              "
            >
              <option value="">-- Select Officer --</option>
            </select>
            <button
              onclick="addOfficer('duty')"
              style="
                cursor: pointer;
                padding: 5px 10px;
                font-weight: bold;
                background: #28a745;
                color: white;
                border: none;
                border-radius: 4px;
              "
              title="Add New"
            >
              +
            </button>
            <button
              onclick="deleteOfficer('duty')"
              style="
                cursor: pointer;
                padding: 5px 10px;
                font-weight: bold;
                background: #dc3545;
                color: white;
                border: none;
                border-radius: 4px;
              "
              title="Delete Selected"
            >
              -
            </button>
          </div>
          <div id="dutyOfficerDisplay" class="display-name"></div>
        </div>

        <!-- Forecast Issued By -->
        <div class="control-box" style="text-align: right">
          <label
            for="issuedBySelect"
            style="
              text-align: left;
              display: inline-block;
              width: 100%;
              max-width: 300px;
            "
            >Forecast Issued by:</label
          >
          <div
            style="
              display: inline-block;
              width: 100%;
              max-width: 300px;
              text-align: left;
            "
          >
            <div style="display: flex; gap: 5px">
              <select
                id="issuedBySelect"
                onchange="updateDisplay('issuedBySelect', 'issuedByDisplay')"
              >
                <option value="">-- Select Officer --</option>
              </select>
              <button
                onclick="addOfficer('issued')"
                style="
                  cursor: pointer;
                  padding: 5px 10px;
                  font-weight: bold;
                  background: #28a745;
                  color: white;
                  border: none;
                  border-radius: 4px;
                "
                title="Add New"
              >
                +
              </button>
              <button
                onclick="deleteOfficer('issued')"
                style="
                  cursor: pointer;
                  padding: 5px 10px;
                  font-weight: bold;
                  background: #dc3545;
                  color: white;
                  border: none;
                  border-radius: 4px;
                "
                title="Delete Selected"
              >
                -
              </button>
            </div>
            <div id="issuedByDisplay" class="display-name"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Official Footer Note -->
    <div class="official-footer-note">
      Generated by SWFC Web Application | Developed by Lal Kamal
    </div>

    <script>
      // Default Lists
      const defaultDutyOfficers = [
        "Shri Kumar Gaurav, Met-A",
        "Smt. Kamini Kumari, Met-A",
      ];

      const defaultIssuedOfficers = [
        "Shri Anand Shankar, Sc-D",
        "Shri Ashish Kumar, Sc-D",
      ];

      let dutyOfficers = [];
      let issuedOfficers = [];

      function loadOfficers() {
        const storedDuty = localStorage.getItem("bihar_duty_officers");
        const storedIssued = localStorage.getItem("bihar_issued_officers");

        dutyOfficers = storedDuty
          ? JSON.parse(storedDuty)
          : [...defaultDutyOfficers];
        issuedOfficers = storedIssued
          ? JSON.parse(storedIssued)
          : [...defaultIssuedOfficers];
      }

      function saveOfficers() {
        localStorage.setItem(
          "bihar_duty_officers",
          JSON.stringify(dutyOfficers),
        );
        localStorage.setItem(
          "bihar_issued_officers",
          JSON.stringify(issuedOfficers),
        );
      }

      // Function to populate dropdowns
      function populateDropdowns() {
        const dutySelect = document.getElementById("dutyOfficerSelect");
        const issuedSelect = document.getElementById("issuedBySelect");

        // Save current selection if any (to preserve across re-renders if possible)
        const currentDuty = dutySelect.value;
        const currentIssued = issuedSelect.value;

        dutySelect.innerHTML = '<option value="">-- Select Officer --</option>';
        issuedSelect.innerHTML =
          '<option value="">-- Select Officer --</option>';

        dutyOfficers.forEach((name) => {
          const opt = document.createElement("option");
          opt.value = name;
          opt.textContent = name;
          dutySelect.appendChild(opt);
        });

        issuedOfficers.forEach((name) => {
          const opt = document.createElement("option");
          opt.value = name;
          opt.textContent = name;
          issuedSelect.appendChild(opt);
        });

        // Restore or set default
        if (currentDuty && dutyOfficers.includes(currentDuty)) {
          dutySelect.value = currentDuty;
        } else if (dutyOfficers.length > 0) {
          dutySelect.value = dutyOfficers[0];
        }

        if (currentIssued && issuedOfficers.includes(currentIssued)) {
          issuedSelect.value = currentIssued;
        } else if (issuedOfficers.length > 0) {
          issuedSelect.value = issuedOfficers[0];
        }

        updateDisplay("dutyOfficerSelect", "dutyOfficerDisplay");
        updateDisplay("issuedBySelect", "issuedByDisplay");
      }

      // Function to update display text
      function updateDisplay(selectId, displayId) {
        const select = document.getElementById(selectId);
        const display = document.getElementById(displayId);
        display.textContent = select.value;
      }

      function addOfficer(type) {
        const name = prompt(
          "Enter Officer Name & Designation (e.g., Name, Designation):",
        );
        if (name && name.trim() !== "") {
          if (type === "duty") {
            dutyOfficers.push(name.trim());
          } else {
            issuedOfficers.push(name.trim());
          }
          saveOfficers();
          populateDropdowns();
        }
      }

      function deleteOfficer(type) {
        const selectId =
          type === "duty" ? "dutyOfficerSelect" : "issuedBySelect";
        const select = document.getElementById(selectId);
        const val = select.value;

        if (!val) {
          alert("Please select an officer to delete.");
          return;
        }

        if (confirm(`Delete "${val}" from list?`)) {
          if (type === "duty") {
            dutyOfficers = dutyOfficers.filter((o) => o !== val);
          } else {
            issuedOfficers = issuedOfficers.filter((o) => o !== val);
          }
          saveOfficers();
          populateDropdowns();
        }
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", () => {
        loadOfficers();
        populateDropdowns();
      });
    </script>
  </body>
</html>
