<!doctype html>
<html lang="hi">
  <head>
    <meta charset="UTF-8" />
    <title>बिहार मौसम पूर्वानुमान | Bihar Weather Forecast</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <style>
      /* IMD Style Table */
      .imd-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        font-size: 14px;
        background: white;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      .imd-table th,
      .imd-table td {
        border: 1px solid #333;
        padding: 8px 10px;
        text-align: left;
        vertical-align: top;
      }
      .imd-table th {
        background-color: #0056b3;
        color: white;
        font-weight: bold;
        text-transform: uppercase;
        font-size: 12px;
      }
      .imd-table tr:nth-child(even) {
        background-color: #f9f9f9;
      }
      .imd-table tr:hover {
        background-color: #f1f1f1;
      }
      .cell-green {
        background-color: #28a745 !important;
        color: white;
        font-weight: bold;
        text-align: center;
      }
      .cell-yellow {
        background-color: #ffc107 !important;
        color: black;
        font-weight: bold;
        text-align: center;
      }
      .cell-orange {
        background-color: #fd7e14 !important;
        color: white;
        font-weight: bold;
        text-align: center;
      }
      .cell-red {
        background-color: #dc3545 !important;
        color: white;
        font-weight: bold;
        text-align: center;
      }
      #tableViewContainer {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
        border: 2px solid #2c3e50;
      }
      #tableViewContainer h3 {
        color: #2c3e50;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
        margin-bottom: 15px;
        text-align: center;
        text-transform: uppercase;
      }
      /* Responsive Map Wrapper */
      .map-wrapper {
        width: 100%;
        position: relative;
        aspect-ratio: 256 / 181;
        min-height: 600px;
        background: #eef2f3; /* Placeholder background */
      }
      #map {
        width: 100%;
        height: 100% !important; /* Override any fixed height */
      }
      @media (max-width: 768px) {
        .map-wrapper {
          aspect-ratio: 1 / 1; /* Square for mobile */
          min-height: 450px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Weather Background Animation -->
    <div class="weather-bg">
      <div class="sun"></div>
      <div class="cloud cloud1"></div>
      <div class="cloud cloud2"></div>
      <div class="cloud cloud3"></div>
      <div class="moon"></div>
      <div class="star star1"></div>
      <div class="star star2"></div>
      <div class="star star3"></div>
      <div class="star star4"></div>
      <div class="star star5"></div>
      <div class="star star6"></div>
      <div class="star star7"></div>
    </div>

    <div class="container">
      <header>
        <!-- Left Gov Logo -->
        <img src="assets/logo.png" class="gov-logo" alt="Government Logo" />

        <div
          class="header-center-container"
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            z-index: 10;
          "
        >
          <h1>बिहार मौसम पूर्वानुमान प्रणाली</h1>
          <h2 style="display: none">Bihar Weather Forecast System</h2>

          <div
            class="header-actions"
            style="
              display: flex;
              gap: 10px;
              align-items: center;
              margin-top: 5px;
              flex-wrap: wrap;
              justify-content: center;
            "
          >
            <button
              class="btn-primary btn-blink-anim"
              title="Home"
              onclick="window.location.href = 'index.html'"
            >
              <i class="fas fa-home"></i>
            </button>
            <button
              id="openLivePreview"
              class="btn-display-anim system-live-btn"
              title="Live Map Preview (7 Days)"
              onclick="window.open('live.html', '_blank')"
            >
              <i class="fas fa-tower-broadcast"></i>
            </button>
            <button
              id="openTempMap"
              class="btn-display-anim"
              title="Live Temperature Map"
              onclick="window.open('temp.html', '_blank')"
            >
              <i class="fas fa-temperature-high"></i>
            </button>
            <button
              id="openWindMap"
              class="btn-display-anim"
              title="Live Wind Map"
              onclick="window.open('wind.html', '_blank')"
            >
              <i class="fas fa-wind"></i>
            </button>
            <button
              id="openRainMap"
              class="btn-display-anim"
              title="Live Rain Map"
              onclick="window.open('rain.html', '_blank')"
            >
              <i class="fas fa-cloud-showers-heavy"></i>
            </button>
            <button
              id="openHumidityMap"
              class="btn-display-anim"
              title="Live Humidity Map"
              onclick="window.open('humidity.html', '_blank')"
            >
              <i class="fas fa-tint"></i>
            </button>
            <button
              id="openDisplayHeader"
              class="btn-display-anim"
              title="Live Display Mode"
              onclick="window.open('display.html', '_blank')"
            >
              <i class="fas fa-tv"></i>
            </button>

            <div
              style="width: 1px; height: 30px; background: #ccc; margin: 0 5px"
            ></div>

            <button
              class="btn-secondary btn-blink-anim"
              title="Weather Bulletin"
              onclick="window.location.href = 'bulletin.html'"
            >
              <i class="fas fa-clipboard-list"></i>
            </button>
            <button
              class="btn-secondary"
              title="7-Day Forecast"
              onclick="window.location.href = 'forecast.html'"
            >
              <i class="fas fa-calendar-day"></i>
            </button>
            <button
              class="btn-secondary"
              title="7-Day Warning"
              onclick="window.location.href = 'warning.html'"
            >
              <i class="fas fa-exclamation-triangle"></i>
            </button>
            <button
              class="btn-secondary"
              title="Min/Max Temp"
              onclick="window.location.href = 'Temperature_Forecast.html'"
            >
              <i class="fas fa-temperature-high"></i>
            </button>
            <button
              class="btn-secondary"
              title="Import Data"
              onclick="window.location.href = 'bulk_import.html'"
            >
              <i class="fas fa-file-import"></i>
            </button>
            <button
              class="btn-secondary"
              title="Observed Data"
              onclick="window.location.href = 'max_min_rh.html'"
            >
              <i class="fas fa-table"></i>
            </button>

            <div
              style="width: 1px; height: 30px; background: #ccc; margin: 0 5px"
            ></div>

            <button
              id="bgChangeBtn"
              class="btn-secondary"
              title="Change Background Color"
            >
              <i class="fas fa-palette"></i>
            </button>
            <input
              type="color"
              id="bgColorInput"
              style="display: none"
              onchange="changeBodyBackground(this.value)"
            />
            <button id="darkModeToggle" class="btn-secondary" title="Dark Mode">
              <i class="fas fa-moon"></i>
            </button>
            <button
              id="langToggle"
              class="btn-secondary"
              title="Switch Language (HI/EN)"
            >
              HI
            </button>
            <!-- User Logo / Sign In Trigger -->
            <div class="user-profile-container">
              <img
                src="logo/logo.png"
                id="userLogoBtn"
                class="user-logo"
                title="Click to Sign In / Menu"
              />
              <div id="userDropdown" class="user-dropdown">
                <!-- Menu items injected by JS -->
              </div>
            </div>
          </div>
        </div>
      </header>

      <main>
        <!-- Map Container -->
        <div class="map-container">
          <div class="day-tabs-container">
            <button class="day-tab active" onclick="switchDay(1)">Day 1</button>
            <button class="day-tab" onclick="switchDay(2)">Day 2</button>
            <button class="day-tab" onclick="switchDay(3)">Day 3</button>
            <button class="day-tab" onclick="switchDay(4)">Day 4</button>
            <button class="day-tab" onclick="switchDay(5)">Day 5</button>
            <button class="day-tab" onclick="switchDay(6)">Day 6</button>
            <button class="day-tab" onclick="switchDay(7)">Day 7</button>
            <label
              class="day-tab"
              style="
                margin-left: 10px;
                display: inline-flex;
                align-items: center;
                height: auto;
                padding: 2px 12px;
              "
            >
              <input
                type="checkbox"
                id="multiDaySelectToggle"
                style="display: none"
                onchange="
                  this.parentElement.classList.toggle('active', this.checked)
                "
              />
              <i class="fas fa-list-check" style="margin-right: 6px"></i>
              <span
                style="
                  display: flex;
                  flex-direction: column;
                  line-height: 1;
                  font-size: 14px;
                  text-align: left;
                "
              >
                <span>Multi-</span>
                <span>Select</span>
              </span>
            </label>
            <button
              id="copyDayData"
              class="day-tab special-feature"
              style="display: none"
            >
              <i class="fas fa-copy"></i> Copy to All
            </button>
            <button
              id="copyDayDataSelect"
              class="day-tab special-feature"
              style="display: none"
            >
              <i class="fas fa-clone"></i> Copy to Select
            </button>

            <!-- Download Section (Moved here) -->
            <div
              class="download-section"
              style="
                display: flex;
                align-items: center;
                gap: 10px;
                border: 1px solid #ccc;
                padding: 5px 10px;
                border-radius: 20px;
                background: #fff;
                margin-left: auto;
              "
            >
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  gap: 2px;
                  font-size: 11px;
                  font-weight: bold;
                "
              >
                <label
                  style="
                    margin-bottom: 0;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 4px;
                  "
                >
                  <input type="checkbox" id="chkDlForecast" checked /> Forecast
                </label>
                <label
                  style="
                    margin-bottom: 0;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 4px;
                  "
                >
                  <input type="checkbox" id="chkDlWarning" checked /> Warning
                </label>
              </div>
              <div style="height: 30px; width: 1px; background: #ccc"></div>
              <div style="display: flex; gap: 5px">
                <button
                  id="downloadMap"
                  class="btn-secondary small-btn"
                  style="background: #27ae60"
                  title="Download Current View"
                >
                  <i class="fas fa-camera"></i> Snap
                </button>
                <button
                  id="downloadSmartImages"
                  class="btn-secondary small-btn"
                  style="background: #8e44ad"
                  title="Download Grouped Images"
                >
                  <i class="fas fa-images"></i> Images
                </button>
                <button
                  id="downloadSmartPDF"
                  class="btn-secondary small-btn special-feature"
                  style="background: #e74c3c"
                  title="Download Grouped PDF"
                >
                  <i class="fas fa-file-pdf"></i> PDF
                </button>
              </div>
            </div>
          </div>
          <div class="map-controls">
            <div class="map-controls-left">
              <label class="icon-toggle-label" title="Enable Zoom">
                <input
                  type="checkbox"
                  id="toggleMapZoom"
                  onchange="toggleMapZoom(this.checked)"
                />
                <i class="fas fa-magnifying-glass-plus"></i> Zoom
              </label>
              <label class="icon-toggle-label" title="Street View">
                <input type="checkbox" id="toggleStreetView" checked />
                <i class="fas fa-road"></i> Street
              </label>
              <label class="icon-toggle-label" title="Satellite View">
                <input type="checkbox" id="toggleSatelliteView" />
                <i class="fas fa-satellite"></i> Satellite
              </label>
              <label class="icon-toggle-label" title="Hybrid View">
                <input type="checkbox" id="toggleHybridView" />
                <i class="fas fa-layer-group"></i> Hybrid
              </label>
              <label class="icon-toggle-label" title="Foothill (Map Show)">
                <input type="checkbox" id="toggleFoothill" checked />
                <i class="fas fa-mountain"></i> Foothills
              </label>
              <label class="icon-toggle-label" title="Animation">
                <input type="checkbox" id="toggleAnimations" checked />
                <i class="fas fa-play"></i> Animation
              </label>
              <label class="icon-toggle-label" title="Show Legend">
                <input type="checkbox" id="toggleLegend" checked />
                <i class="fas fa-list-ul"></i> Legend
              </label>

              <!-- Weather Effect Controls -->
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 5px;
                  border: 1px solid #ccc;
                  padding: 3px 8px;
                  border-radius: 20px;
                  background: #fff;
                "
              >
                <label
                  class="icon-toggle-label"
                  title="Toggle Weather Animation"
                  style="border: none; box-shadow: none; padding: 0"
                >
                  <input
                    type="checkbox"
                    id="toggleMapEffect"
                    onchange="toggleMapEffect(this.checked)"
                  />
                  <i class="fas fa-wand-magic-sparkles"></i>
                </label>
                <select
                  id="mapEffectSelect"
                  onchange="handleEffectChange()"
                  style="
                    border: none;
                    background: transparent;
                    font-size: 12px;
                    font-weight: bold;
                    cursor: pointer;
                    outline: none;
                    max-width: 100px;
                  "
                >
                  <option value="thunderstorm">Thunderstorm</option>
                  <option value="heavyrain">Heavy Rain</option>
                  <option value="gustywind">Gusty Wind</option>
                  <option value="densefog">Dense Fog</option>
                </select>
                <div
                  style="
                    width: 1px;
                    height: 15px;
                    background: #ccc;
                    margin: 0 5px;
                  "
                ></div>
                <label
                  class="icon-toggle-label"
                  title="Clean Map Background"
                  style="border: none; box-shadow: none; padding: 0"
                >
                  <input
                    type="checkbox"
                    id="toggleCleanMap"
                    onchange="toggleCleanMap(this.checked)"
                  />
                  <i class="fas fa-eraser"></i>
                </label>
              </div>

              <div style="display: flex; align-items: center; gap: 5px">
                <button
                  onclick="fitMapToWidth()"
                  style="
                    border: 1px solid #ccc;
                    background: #fff;
                    cursor: pointer;
                    border-radius: 50%;
                    width: 30px;
                    height: 30px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 0;
                  "
                  title="Auto Fit Map (2% Padding)"
                >
                  <i class="fas fa-compress-arrows-alt"></i>
                </button>

                <select
                  id="aspectRatioSelect"
                  onchange="changeAspectRatio(this.value)"
                  style="
                    border: 1px solid #ccc;
                    background: #fff;
                    font-size: 12px;
                    font-weight: bold;
                    cursor: pointer;
                    outline: none;
                    padding: 4px 8px;
                    border-radius: 20px;
                    height: 30px;
                    max-width: 100px;
                  "
                  title="Change Map Aspect Ratio / Resize"
                >
                  <option value="256/181" selected>256:181 (Standard)</option>
                  <option value="4/5">
                    4:5 (Portrait – Facebook/Instagram best)
                  </option>
                  <option value="16/9">
                    16:9 (Landscape – Twitter, YouTube)
                  </option>
                  <option value="1.91/1">1.91:1 (Facebook link preview)</option>
                  <option value="4/3">4:3 (Standard photo)</option>
                  <option value="2/1">2:1 (Banner / Website)</option>
                  <option value="1/1">
                    1:1 (Square – Facebook, Instagram, Twitter)
                  </option>
                  <option value="custom">Custom (Resize)</option>
                </select>
              </div>

              <label
                class="icon-toggle-label"
                id="lblLayoutEdit"
                title="Enable Layout Edit"
                style="display: none"
              >
                <input
                  type="checkbox"
                  id="chkLayoutEdit"
                  onchange="toggleLayoutEditMode(this.checked)"
                />
                <i class="fas fa-arrows-alt"></i> Layout Edit
              </label>
              <button
                id="fitMapBounds"
                class="btn-secondary small-btn"
                title="Fit Map to Screen"
              >
                <i class="fas fa-compress-arrows-alt"></i> Fit Map
              </button>
              <button id="clearMapSelection" class="btn-secondary small-btn">
                Clear All
              </button>

              <button
                class="btn-secondary small-btn"
                onclick="document.getElementById('mapBgInput').click()"
                title="Change Map Background"
              >
                <i class="fas fa-fill-drip"></i> Map BG
              </button>
              <input
                type="color"
                id="mapBgInput"
                style="display: none"
                onchange="updateMapBackground(this.value)"
              />
            </div>
            <div class="map-sub-regions">
              <label
                class="checkbox-container small-checkbox"
                title="North Bihar Foothill Districts"
              >
                <input
                  type="checkbox"
                  value="foothill"
                  class="map-region-check"
                /><span class="checkmark"></span>FT
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="Northern Region"
              >
                <input
                  type="checkbox"
                  value="northern"
                  class="map-region-check"
                /><span class="checkmark"></span>NR
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="Southern Region"
              >
                <input
                  type="checkbox"
                  value="southern"
                  class="map-region-check"
                /><span class="checkmark"></span>SR
              </label>
              <div
                style="
                  width: 1px;
                  height: 20px;
                  background: #ccc;
                  margin: 0 5px;
                "
              ></div>
              <label
                class="checkbox-container small-checkbox"
                title="North-West Region"
              >
                <input
                  type="checkbox"
                  value="nw"
                  class="map-region-check"
                /><span class="checkmark"></span>NW
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="North-Central Region"
              >
                <input
                  type="checkbox"
                  value="nc"
                  class="map-region-check"
                /><span class="checkmark"></span>NC
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="North-East Region"
              >
                <input
                  type="checkbox"
                  value="ne"
                  class="map-region-check"
                /><span class="checkmark"></span>NE
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="South-West Region"
              >
                <input
                  type="checkbox"
                  value="sw"
                  class="map-region-check"
                /><span class="checkmark"></span>SW
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="South-Central Region"
              >
                <input
                  type="checkbox"
                  value="sc"
                  class="map-region-check"
                /><span class="checkmark"></span>SC
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="South-East Region"
              >
                <input
                  type="checkbox"
                  value="se"
                  class="map-region-check"
                /><span class="checkmark"></span>SE
              </label>
            </div>

            <!-- Show Update Controls -->
            <div
              class="update-controls-container"
              style="
                display: flex;
                align-items: center;
                gap: 10px;
                margin-left: 15px;
                border-left: 1px solid #ccc;
                padding-left: 15px;
              "
            >
              <button
                id="btnClearFW"
                class="btn-secondary small-btn"
                style="background: #c0392b; color: white"
              >
                Clear Forecast & Warning
              </button>
              <button
                id="btnTable"
                class="btn-secondary small-btn"
                style="background: #3498db; color: white"
              >
                Table
              </button>
              <button
                id="btnTestData"
                class="btn-secondary small-btn"
                style="background: #8e44ad; color: white"
              >
                Test Data
              </button>
              <button
                id="btnShowUpdate"
                class="btn-secondary small-btn"
                style="background: #34495e; color: white"
              >
                Show Update
              </button>
              <div id="hiddenUpdateOptions" style="display: none; gap: 5px">
                <button
                  id="btnReviewForecast"
                  class="btn-secondary small-btn"
                  onclick="setReviewMode('forecast')"
                >
                  Forecast
                </button>
                <button
                  id="btnReviewWarning"
                  class="btn-secondary small-btn"
                  onclick="setReviewMode('warning')"
                >
                  Warning
                </button>
              </div>
            </div>
          </div>

          <div class="map-wrapper">
            <div id="map" class="map-frame">
              <!-- Map Header Text (Moved inside map for download) -->
              <div
                id="mapHeaderText"
                class="map-header-text"
                style="display: none"
              ></div>
              <!-- Weather Effects -->
              <canvas id="weatherCanvas"></canvas>
              <div id="weatherLightning"></div>
              <div id="weatherFog"></div>
            </div>
          </div>

          <!-- Table View Container (Hidden by default) -->
          <div id="tableViewContainer" style="display: none">
            <h3>7-Day Weather Warning Bulletin</h3>
            <div
              style="overflow: auto; max-height: 75vh; border: 1px solid #ccc"
            >
              <table class="imd-table" id="imdTable">
                <thead>
                  <tr>
                    <th>Day</th>
                    <th>Date</th>
                    <th>Affected Area</th>
                    <th>Weather Phenomenon</th>
                    <th>Warning Description</th>
                    <th>Warning Colour</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="control-panel">
          <!-- Regional -->
          <div id="regionalGroups" class="selection-container">
            <label>क्षेत्रीय समूह चुनें:</label>
            <div class="district-grid" id="regionalGrid"></div>
            <button
              type="button"
              class="btn-secondary same-size"
              onclick="selectAllRegions()"
            >
              सभी चुनें / Select All
            </button>
            <button
              type="button"
              class="btn-secondary same-size"
              onclick="clearRegionalSelection()"
            >
              साफ़ करें / Clear All
            </button>
          </div>

          <!-- Multiple -->
          <div id="multipleDistricts" class="selection-container">
            <label>एकाधिक जिले चुनें:</label>
            <input
              type="text"
              id="districtSearch"
              class="same-size"
              placeholder="Search District..."
              style="width: 100%; margin-bottom: 10px"
            />
            <div class="district-grid" id="districtGrid"></div>
            <button
              type="button"
              class="btn-secondary same-size"
              onclick="selectAllDistricts()"
            >
              सभी चुनें
            </button>
            <button
              type="button"
              class="btn-secondary same-size"
              onclick="clearDistrictSelection()"
            >
              साफ़ करें
            </button>
          </div>

          <!-- Place count -->
          <div class="place-count-panel">
            <label style="margin-bottom: 5px; display: block"
              >DISTRIBUTION</label
            >
            <select id="globalPlaceCount" class="same-size"></select>
          </div>

          <!-- Warning Panel -->
          <div class="warning-panel">
            <label style="margin-bottom: 5px; display: block">WARNING</label>
            <select id="globalWarning" class="same-size"></select>
          </div>

          <!-- Color Selection Panel -->
          <div class="color-selection-panel">
            <label>COLOR SELECTION</label>
            <select id="globalColorSelect" class="same-size"></select>
          </div>

          <!-- Phenomena -->
          <div class="weather-phenomena">
            <div style="position: relative">
              <h3>मौसम घटनाएँ:</h3>
              <div
                style="
                  position: absolute;
                  right: 0;
                  top: 0;
                  display: flex;
                  align-items: center;
                  gap: 10px;
                "
              >
                <div
                  id="audioPlayingIndicator"
                  style="display: none; color: #e74c3c"
                  title="Sound Playing"
                >
                  <i class="fas fa-volume-up audio-playing-icon"></i>
                </div>
                <input
                  type="range"
                  id="audioVolumeSlider"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.5"
                  style="width: 80px; display: none; cursor: pointer"
                  title="Volume"
                />
                <label
                  class="checkbox-container small-checkbox"
                  style="margin-bottom: 0"
                >
                  <input type="checkbox" id="toggleAudioEffects" />
                  <span class="checkmark"></span>
                  Audio Effects <i class="fas fa-volume-up"></i>
                </label>
              </div>
            </div>
            <div id="phenomenaContainer"></div>
          </div>

          <!-- Buttons -->
          <div class="action-buttons">
            <button id="generateForecast" class="btn-primary same-size">
              पूर्वानुमान तैयार करें
            </button>
            <button
              id="updateForecastMap"
              class="btn-primary same-size"
              style="background: #17a2b8"
            >
              Forecast Map Update
            </button>
            <button
              id="updateWarningMap"
              class="btn-primary same-size"
              style="background: #e67e22"
            >
              Warning Map Update
            </button>
            <button id="clearSelection" class="btn-secondary same-size">
              साफ़ करें
            </button>
          </div>
        </div>

        <!-- Output -->
        <div class="forecast-output" id="forecastOutput">
          <h3>पूर्वानुमान परिणाम:</h3>
          <div id="forecastContent">
            <p class="placeholder-text">
              कोई जिला चुने और मौसम घटनाएँ चुनें...
            </p>
          </div>
        </div>

        <!-- Export -->
        <div class="export-options">
          <button id="exportText" class="btn-export same-size">
            टेक्स्ट निर्यात करें
          </button>
          <button id="exportPDF" class="btn-export same-size">
            PDF निर्यात करें
          </button>
          <button id="copyClipboard" class="btn-copy same-size">
            क्लिपबोर्ड पर कॉपी करें
          </button>
        </div>
      </main>
    </div>

    <div class="footer-wrapper">
      <svg
        class="footer-wave"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1440 320"
        preserveAspectRatio="none"
      >
        <defs>
          <linearGradient id="wave-grad" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color: #667eea; stop-opacity: 1" />
            <stop offset="100%" style="stop-color: #0a2540; stop-opacity: 1" />
          </linearGradient>
        </defs>
        <path
          fill="url(#wave-grad)"
          fill-opacity="0.6"
          d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
        ></path>
        <path
          fill="url(#wave-grad)"
          fill-opacity="1"
          d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
        ></path>
      </svg>
      <footer class="main-footer">
        <div
          class="footer-content"
          style="flex-direction: column; align-items: center"
        >
          <div class="footer-section" style="text-align: center; width: 100%">
            <h3>Bihar Weather Forecast</h3>
            <p class="footer-credit">
              डेटा स्रोत: India Meteorological Department (IMD), Meteorological
              Centre, Patna.
            </p>
            <br />
            <p class="footer-analysis">
              बिहार मौसम पूर्वानुमान प्रणाली: विश्लेषण एवं प्रस्तुतीकरण
            </p>
            <br />
            <div style="margin-top: 15px; margin-bottom: 5px">
              <span style="font-size: 1.8em; font-weight: 800; color: #ff9966"
                >@ Lal Kamal</span
              >
            </div>
            <p class="footer-copy" style="margin-top: 5px; margin-bottom: 15px">
              All Rights Reserved.
            </p>
            <p
              class="visitor-count"
              title="Total Views"
              style="justify-content: center; margin-top: 15px"
            >
              <i class="fas fa-eye"></i> Visitors:
              <span id="visitorCount">...</span>
            </p>
          </div>

          <div
            class="footer-section"
            style="
              width: 100%;
              display: flex;
              justify-content: flex-end;
              margin-top: 20px;
            "
          >
            <button id="backToTop" class="btn-secondary">
              Back to Top <i class="fas fa-arrow-up"></i>
            </button>
          </div>
        </div>
      </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none">
      <div class="spinner"></div>
      <p>पूर्वानुमान तैयार किया जा रहा है... / Generating Forecast...</p>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="custom-modal" style="display: none">
      <div class="modal-content">
        <span class="close-modal" onclick="closeLoginModal()">&times;</span>
        <h3>Admin Login</h3>
        <div class="form-group">
          <label>Username:</label>
          <input type="text" id="loginId" placeholder="Enter Username" />
        </div>
        <div class="form-group">
          <label>Password:</label>
          <div style="position: relative">
            <input
              type="password"
              id="loginPass"
              placeholder="Enter Password"
              style="width: 100%; padding-right: 35px"
            />
            <i
              class="fas fa-eye"
              id="togglePassword"
              onclick="togglePasswordVisibility()"
              style="
                position: absolute;
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
                cursor: pointer;
                color: #666;
              "
            ></i>
          </div>
        </div>
        <button
          onclick="submitLogin()"
          class="btn-primary"
          style="width: 100%; margin-top: 15px"
        >
          Sign In
        </button>
        <p id="loginError" style="color: red; display: none; margin-top: 10px">
          Invalid Credentials
        </p>
      </div>
    </div>

    <!-- About Us Modal -->
    <div id="aboutModal" class="custom-modal" style="display: none">
      <div class="modal-content glass-modal">
        <span
          class="close-modal"
          onclick="document.getElementById('aboutModal').style.display = 'none'"
          >&times;</span
        >
        <h3>About Us</h3>
        <p>
          Bihar Weather Forecast System is a digital platform that provides
          accurate and reliable weather information for Bihar. This system has
          been developed by “Lal Kamal” with the objective of presenting
          district-wise weather forecasts and rainfall analysis in a simple and
          useful manner, so that people can make better and timely decisions.
        </p>
      </div>
    </div>

    <!-- Contact Us Modal -->
    <div id="contactModal" class="custom-modal" style="display: none">
      <div class="modal-content glass-modal">
        <span
          class="close-modal"
          onclick="
            document.getElementById('contactModal').style.display = 'none'
          "
          >&times;</span
        >
        <h3>Contact Us</h3>
        <p>Email: lalkamal999@gmail.com<br />Phone: +91-9852917265</p>
      </div>
    </div>

    <!-- Copy To Specific Days Modal -->
    <div id="copyModal" class="custom-modal" style="display: none">
      <div class="modal-content">
        <span
          class="close-modal"
          onclick="document.getElementById('copyModal').style.display = 'none'"
          >&times;</span
        >
        <h3>Copy Forecast To...</h3>
        <p>Select days to copy the current day's forecast to:</p>
        <div class="copy-days-grid" id="copyDaysContainer">
          <!-- Checkboxes injected by JS -->
        </div>
        <div style="display: flex; gap: 10px; margin-top: 15px">
          <button
            onclick="submitCopyDays()"
            class="btn-primary"
            style="flex: 1"
          >
            Copy
          </button>
          <button
            onclick="
              document.getElementById('copyModal').style.display = 'none'
            "
            class="btn-secondary"
            style="flex: 1"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/shpjs@latest/dist/shp.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="js/districts.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
