<!DOCTYPE html>
<html lang="hi">
  <head>
    <meta charset="UTF-8" />
    <title>बिहार मौसम पूर्वानुमान | Bihar Weather Forecast</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body>
    <!-- Weather Background Animation -->
    <div class="weather-bg">
      <div class="sun"></div>
      <div class="cloud cloud1"></div>
      <div class="cloud cloud2"></div>
      <div class="cloud cloud3"></div>
      <div class="moon"></div>
      <div class="star star1"></div>
      <div class="star star2"></div>
      <div class="star star3"></div>
      <div class="star star4"></div>
      <div class="star star5"></div>
      <div class="star star6"></div>
      <div class="star star7"></div>
    </div>

    <div class="container">
      <header>
        <!-- Left Gov Logo -->
        <img src="assets/logo.png" class="gov-logo" alt="Government Logo" />

        <div
          class="header-actions"
          style="
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
          "
        >
          <button
            id="openDisplayHeader"
            class="btn-display-anim"
            title="Live Display Mode"
          >
            <i class="fas fa-tv"></i>
            <span class="btn-ripple"></span>
          </button>
          <button id="darkModeToggle" class="btn-secondary" title="Dark Mode">
            <i class="fas fa-moon"></i>
          </button>
          <!-- User Logo / Sign In Trigger -->
          <div class="user-profile-container">
            <img
              src="logo/logo.png"
              id="userLogoBtn"
              class="user-logo"
              title="Click to Sign In / Menu"
            />
            <div id="userDropdown" class="user-dropdown">
              <!-- Menu items injected by JS -->
            </div>
          </div>
        </div>
        <h1>बिहार मौसम पूर्वानुमान प्रणाली</h1>
        <h2>Bihar Weather Forecast System</h2>
        <div class="header-info">
          <div id="currentDateTime" class="info-box"></div>
          <div id="currentTemp" class="info-box">Loading...</div>
        </div>
      </header>

      <main>
        <!-- Map Container -->
        <div class="map-container">
          <div class="day-tabs-container">
            <button class="day-tab active" onclick="switchDay(1)">Day 1</button>
            <button class="day-tab" onclick="switchDay(2)">Day 2</button>
            <button class="day-tab" onclick="switchDay(3)">Day 3</button>
            <button class="day-tab" onclick="switchDay(4)">Day 4</button>
            <button class="day-tab" onclick="switchDay(5)">Day 5</button>
            <button class="day-tab" onclick="switchDay(6)">Day 6</button>
            <button class="day-tab" onclick="switchDay(7)">Day 7</button>
            <button
              id="copyDayData"
              class="day-tab special-feature"
              style="background: #e67e22; color: white; border-color: #e67e22"
            >
              <i class="fas fa-copy"></i> Copy to All
            </button>
            <button
              id="copyDayDataSelect"
              class="day-tab special-feature"
              style="background: #d35400; color: white; border-color: #d35400"
            >
              <i class="fas fa-clone"></i> Copy to Select
            </button>
          </div>
          <div class="map-controls">
            <div class="map-controls-left">
              <label class="checkbox-container small-checkbox">
                <input type="checkbox" id="toggleStreetView" checked />
                <span class="checkmark"></span>
                Street View
              </label>
              <label class="checkbox-container small-checkbox">
                <input type="checkbox" id="toggleSatelliteView" />
                <span class="checkmark"></span>
                Satellite View
              </label>
              <label class="checkbox-container small-checkbox">
                <input type="checkbox" id="toggleFoothill" checked />
                <span class="checkmark"></span>
                Foothill (map show)
              </label>
              <button id="clearMapSelection" class="btn-secondary small-btn">
                Clear All
              </button>
              <button
                id="downloadMap"
                class="btn-secondary small-btn"
                style="background: #27ae60"
              >
                <i class="fas fa-download"></i> Map
              </button>
              <button
                id="download7Days"
                class="btn-secondary small-btn"
                style="background: #8e44ad"
              >
                <i class="fas fa-images"></i> All Map
              </button>
              <button
                id="download7DaysPDF"
                class="btn-secondary small-btn special-feature"
                style="background: #e74c3c"
              >
                <i class="fas fa-file-pdf"></i> 7 Days PDF
              </button>
            </div>
            <div class="map-sub-regions">
              <label
                class="checkbox-container small-checkbox"
                title="North Bihar Foothill Districts"
              >
                <input
                  type="checkbox"
                  value="foothill"
                  class="map-region-check"
                /><span class="checkmark"></span>FT
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="Northern Region"
              >
                <input
                  type="checkbox"
                  value="northern"
                  class="map-region-check"
                /><span class="checkmark"></span>NR
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="Southern Region"
              >
                <input
                  type="checkbox"
                  value="southern"
                  class="map-region-check"
                /><span class="checkmark"></span>SR
              </label>
              <div
                style="
                  width: 1px;
                  height: 20px;
                  background: #ccc;
                  margin: 0 5px;
                "
              ></div>
              <label
                class="checkbox-container small-checkbox"
                title="North-West Region"
              >
                <input
                  type="checkbox"
                  value="nw"
                  class="map-region-check"
                /><span class="checkmark"></span>NW
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="North-Central Region"
              >
                <input
                  type="checkbox"
                  value="nc"
                  class="map-region-check"
                /><span class="checkmark"></span>NC
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="North-East Region"
              >
                <input
                  type="checkbox"
                  value="ne"
                  class="map-region-check"
                /><span class="checkmark"></span>NE
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="South-West Region"
              >
                <input
                  type="checkbox"
                  value="sw"
                  class="map-region-check"
                /><span class="checkmark"></span>SW
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="South-Central Region"
              >
                <input
                  type="checkbox"
                  value="sc"
                  class="map-region-check"
                /><span class="checkmark"></span>SC
              </label>
              <label
                class="checkbox-container small-checkbox"
                title="South-East Region"
              >
                <input
                  type="checkbox"
                  value="se"
                  class="map-region-check"
                /><span class="checkmark"></span>SE
              </label>
            </div>
          </div>
          <div id="map"></div>
        </div>

        <div class="control-panel">
          <!-- Regional -->
          <div id="regionalGroups" class="selection-container">
            <label>क्षेत्रीय समूह चुनें / Select Regional Groups:</label>
            <div class="district-grid" id="regionalGrid"></div>
            <button
              type="button"
              class="btn-secondary same-size"
              onclick="selectAllRegions()"
            >
              सभी चुनें / Select All
            </button>
            <button
              type="button"
              class="btn-secondary same-size"
              onclick="clearRegionalSelection()"
            >
              साफ़ करें / Clear All
            </button>
          </div>

          <!-- Multiple -->
          <div id="multipleDistricts" class="selection-container">
            <label>एकाधिक जिले चुनें / Select Multiple Districts:</label>
            <input
              type="text"
              id="districtSearch"
              class="same-size"
              placeholder="Search District..."
              style="width: 100%; margin-bottom: 10px"
            />
            <div class="district-grid" id="districtGrid"></div>
            <button
              type="button"
              class="btn-secondary same-size"
              onclick="selectAllDistricts()"
            >
              सभी चुनें
            </button>
            <button
              type="button"
              class="btn-secondary same-size"
              onclick="clearDistrictSelection()"
            >
              साफ़ करें
            </button>
          </div>

          <!-- Place count -->
          <div class="place-count-panel">
            <label>स्थान की मात्रा / Place count:</label>
            <select id="globalPlaceCount" class="same-size">
              <option value="1">
                एक या दो स्थानों पर (likely at one or two places)
              </option>
              <option value="2">कुछ स्थानों (likely at a Few places)</option>
              <option value="3">
                अनेक स्थानों पर (likely at a many places)
              </option>
              <option value="4">
                अधिकांश स्थानों पर (likely at a most places)
              </option>
            </select>
          </div>

          <!-- Phenomena -->
          <div class="weather-phenomena">
            <h3>मौसम घटनाएँ / Weather Phenomena:</h3>
            <div id="phenomenaContainer"></div>
          </div>

          <!-- Buttons -->
          <div class="action-buttons">
            <button id="generateForecast" class="btn-primary same-size">
              पूर्वानुमान तैयार करें
            </button>
            <button
              id="updateMapPhenomena"
              class="btn-primary same-size"
              style="background: #e67e22"
            >
              मैप अपडेट करें
            </button>
            <button id="clearSelection" class="btn-secondary same-size">
              साफ़ करें
            </button>
          </div>
        </div>

        <!-- Output -->
        <div class="forecast-output" id="forecastOutput">
          <h3>पूर्वानुमान परिणाम / Forecast Result:</h3>
          <div id="forecastContent">
            <p class="placeholder-text">
              कोई जिला चुने और मौसम घटनाएँ चुनें...
            </p>
          </div>
        </div>

        <!-- Export -->
        <div class="export-options">
          <button id="exportText" class="btn-export same-size">
            टेक्स्ट निर्यात करें
          </button>
          <button id="exportPDF" class="btn-export same-size">
            PDF निर्यात करें
          </button>
          <button id="copyClipboard" class="btn-copy same-size">
            क्लिपबोर्ड पर कॉपी करें
          </button>
        </div>
      </main>
    </div>

    <div class="footer-wrapper">
      <svg
        class="footer-wave"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1440 320"
        preserveAspectRatio="none"
      >
        <defs>
          <linearGradient id="wave-grad" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color: #667eea; stop-opacity: 1" />
            <stop offset="100%" style="stop-color: #0a2540; stop-opacity: 1" />
          </linearGradient>
        </defs>
        <path
          fill="url(#wave-grad)"
          fill-opacity="0.6"
          d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
        ></path>
        <path
          fill="url(#wave-grad)"
          fill-opacity="1"
          d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
        ></path>
      </svg>
      <footer class="main-footer">
        <div class="footer-content">
          <div class="footer-section">
            <h3>Bihar Weather Forecast</h3>
            <p class="footer-credit">
              डेटा स्रोत: India Meteorological Department (IMD), Meteorological
              Centre, Patna
            </p>
            <p class="footer-analysis">
              विश्लेषण एवं प्रस्तुतीकरण: बिहार मौसम पूर्वानुमान प्रणाली
            </p>
            <div style="margin-top: 15px; margin-bottom: 5px">
              <span style="font-size: 1.8em; font-weight: 800; color: #ff9966"
                >@ Lal Kamal</span
              >
            </div>
            <div class="social-links" style="margin: 10px 0">
              <a
                href="https://www.facebook.com/lalkamal"
                target="_blank"
                aria-label="Facebook"
                class="social-fb"
              >
                <i class="fab fa-facebook"></i>
              </a>
              <a
                href="https://www.instagram.com/lalkamal"
                target="_blank"
                aria-label="Instagram"
                class="social-insta"
              >
                <i class="fab fa-instagram"></i>
              </a>
              <a
                href="https://twitter.com/lalkaml007"
                target="_blank"
                aria-label="Twitter"
                class="social-x"
              >
                <i class="fab fa-x-twitter"></i>
              </a>
              <a
                href="#"
                onclick="shareApp()"
                aria-label="Share"
                class="social-share"
              >
                <i class="fas fa-share-alt"></i>
              </a>
            </div>
            <p class="footer-copy">© Lal Kamal. All Rights Reserved.</p>
            <p class="visitor-count" title="Total Views">
              <i class="fas fa-eye"></i> Visitors:
              <span id="visitorCount">...</span>
            </p>
          </div>

          <div
            class="footer-section"
            style="
              flex: 0 0 auto;
              display: flex;
              align-items: center;
              justify-content: flex-end;
            "
          >
            <button id="backToTop" class="btn-secondary">
              Back to Top <i class="fas fa-arrow-up"></i>
            </button>
          </div>
        </div>
      </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none">
      <div class="spinner"></div>
      <p>पूर्वानुमान तैयार किया जा रहा है... / Generating Forecast...</p>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="custom-modal" style="display: none">
      <div class="modal-content">
        <span class="close-modal" onclick="closeLoginModal()">&times;</span>
        <h3>Admin Login</h3>
        <div class="form-group">
          <label>Username:</label>
          <input type="text" id="loginId" placeholder="Enter Username" />
        </div>
        <div class="form-group">
          <label>Password:</label>
          <div style="position: relative">
            <input
              type="password"
              id="loginPass"
              placeholder="Enter Password"
              style="width: 100%; padding-right: 35px"
            />
            <i
              class="fas fa-eye"
              id="togglePassword"
              onclick="togglePasswordVisibility()"
              style="
                position: absolute;
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
                cursor: pointer;
                color: #666;
              "
            ></i>
          </div>
        </div>
        <button
          onclick="submitLogin()"
          class="btn-primary"
          style="width: 100%; margin-top: 15px"
        >
          Sign In
        </button>
        <p id="loginError" style="color: red; display: none; margin-top: 10px">
          Invalid Credentials
        </p>
      </div>
    </div>

    <!-- About Us Modal -->
    <div id="aboutModal" class="custom-modal" style="display: none">
      <div class="modal-content glass-modal">
        <span
          class="close-modal"
          onclick="document.getElementById('aboutModal').style.display='none'"
          >&times;</span
        >
        <h3>About Us</h3>
        <p>
          Bihar Weather Forecast System is a digital platform that provides
          accurate and reliable weather information for Bihar. This system has
          been developed by “Lal Kamal” with the objective of presenting
          district-wise weather forecasts and rainfall analysis in a simple and
          useful manner, so that people can make better and timely decisions.
        </p>
      </div>
    </div>

    <!-- Contact Us Modal -->
    <div id="contactModal" class="custom-modal" style="display: none">
      <div class="modal-content">
        <span
          class="close-modal"
          onclick="document.getElementById('contactModal').style.display='none'"
          >&times;</span
        >
        <h3>Contact Us</h3>
        <p>Email: lalkamal999@gmail.com<br />Phone: +91-9852917265</p>
      </div>
    </div>

    <!-- Copy To Specific Days Modal -->
    <div id="copyModal" class="custom-modal" style="display: none">
      <div class="modal-content">
        <span
          class="close-modal"
          onclick="document.getElementById('copyModal').style.display='none'"
          >&times;</span
        >
        <h3>Copy Forecast To...</h3>
        <p>Select days to copy the current day's forecast to:</p>
        <div class="copy-days-grid" id="copyDaysContainer">
          <!-- Checkboxes injected by JS -->
        </div>
        <div style="display: flex; gap: 10px; margin-top: 15px">
          <button
            onclick="submitCopyDays()"
            class="btn-primary"
            style="flex: 1"
          >
            Copy
          </button>
          <button
            onclick="document.getElementById('copyModal').style.display='none'"
            class="btn-secondary"
            style="flex: 1"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/shpjs@latest/dist/shp.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="js/districts.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
