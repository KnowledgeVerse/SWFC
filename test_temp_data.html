<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Temperature Data Tables</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        padding: 20px;
        background-color: #f4f7f6;
        color: #333;
      }
      .table-section {
        background: white;
        padding: 20px;
        margin-bottom: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        overflow-x: auto;
        border: 1px solid #ddd;
      }
      h2 {
        color: #2c3e50;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
        margin-top: 0;
        font-size: 1.5em;
      }
      .copy-btn {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        margin-bottom: 15px;
        transition: background 0.3s;
      }
      .copy-btn:hover {
        background-color: #0056b3;
      }
      .success-msg {
        color: #28a745;
        margin-left: 10px;
        font-weight: bold;
        display: none;
        animation: fadeIn 0.5s;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Navigation Toolbar */
      .toggle-btn {
        text-decoration: none;
        color: #fff;
        background-color: #6c757d;
        padding: 8px 15px;
        border-radius: 5px;
        font-weight: bold;
        transition: background 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
        border: none;
        cursor: pointer;
        font-size: 14px;
      }
      .toggle-btn:hover {
        background-color: #5a6268;
      }
      .toggle-btn.active {
        background-color: #0056b3;
      }
      .btn-blink-anim {
        animation: blink-pulse 2s infinite;
        background-color: #ff9800 !important;
        color: white !important;
      }
      @keyframes blink-pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 152, 0, 0.7);
          transform: scale(1);
        }
        50% {
          box-shadow: 0 0 0 10px rgba(255, 152, 0, 0);
          transform: scale(1.05);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(255, 152, 0, 0);
          transform: scale(1);
        }
      }

      /* Table Styling */
      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
        border: 1px solid #333;
      }
      th,
      td {
        border: 1px solid #333;
        padding: 10px;
        text-align: center;
        vertical-align: middle;
      }
      tr:hover td {
        filter: brightness(0.95);
        cursor: default;
      }

      /* Table 1: Observed Data Colors */
      .obs-header th {
        background-color: #e6b07d;
        color: #000;
        text-transform: uppercase;
      }
      .col-dist {
        background-color: #cfd8b6;
        text-align: left;
        font-weight: bold;
      }
      .col-max {
        background-color: #ffff00;
      }
      .col-min {
        background-color: #dfe8c6;
      }
      .col-rh {
        background-color: #9fd0df;
      }
      .col-rain {
        background-color: #00b050;
        color: white;
        font-weight: bold;
      }

      /* Table 2: Forecast Data Colors */
      .fc-header th {
        background-color: #d9d9d9;
        color: #000;
      }
      .fc-sector {
        background-color: #f4efe6;
        font-weight: bold;
      }
      .fc-dist {
        background-color: #f4efe6;
        text-align: left;
      }
      .fc-param-max {
        color: #d35400;
        font-weight: bold;
        background-color: #fde2e4;
      }
      .fc-param-min {
        color: #2980b9;
        font-weight: bold;
        background-color: #e3f2fd;
      }

      /* Responsive */
      @media (max-width: 768px) {
        body {
          padding: 10px;
        }
        th,
        td {
          padding: 5px;
          font-size: 12px;
        }
      }
    </style>
  </head>
  <body>
    <div
      class="nav-toolbar"
      style="
        display: flex;
        gap: 5px;
        flex-wrap: wrap;
        justify-content: center;
        padding: 10px;
        margin-bottom: 10px;
      "
    >
      <a href="index.html" class="toggle-btn btn-blink-anim" title="Home"
        ><i class="fas fa-home"></i
      ></a>
      <a href="live.html" class="toggle-btn" title="Live Preview"
        ><i class="fas fa-tower-broadcast"></i
      ></a>
      <a href="temp.html" class="toggle-btn" title="Live Temp"
        ><i class="fas fa-thermometer-half"></i
      ></a>
      <a href="wind.html" class="toggle-btn" title="Wind"
        ><i class="fas fa-wind"></i
      ></a>
      <a href="rain.html" class="toggle-btn" title="Rain"
        ><i class="fas fa-cloud-showers-heavy"></i
      ></a>
      <a href="humidity.html" class="toggle-btn" title="Humidity"
        ><i class="fas fa-tint"></i
      ></a>
      <a href="display.html" class="toggle-btn" title="Display Mode"
        ><i class="fas fa-tv"></i
      ></a>
      <div style="width: 1px; background: #ccc; margin: 0 5px"></div>
      <a
        href="bulletin.html"
        class="toggle-btn btn-blink-anim"
        title="Weather Bulletin"
        ><i class="fas fa-clipboard-list"></i
      ></a>
      <a
        href="Generate_Weather_Bulletin.html"
        class="toggle-btn"
        title="Generate_Weather_Bulletin"
        ><i class="fas fa-file-lines"></i
      ></a>
      <a href="max_min_rh.html" class="toggle-btn" title="Observed Data"
        ><i class="fas fa-table"></i
      ></a>
      <a href="Weather_summary.html" class="toggle-btn" title="Weather Summary"
        ><i class="fas fa-file-alt"></i
      ></a>
      <a
        href="Detailed_Weather_Forecast.html"
        class="toggle-btn"
        title="Detailed Forecast"
        ><i class="fas fa-list-alt"></i
      ></a>
      <a
        href="Weather_Warning_Table.html"
        class="toggle-btn"
        title="Warning Table"
        ><i class="fas fa-table"></i
      ></a>
      <a href="bulk_import.html" class="toggle-btn" title="Import Data"
        ><i class="fas fa-file-import"></i
      ></a>
      <a
        href="Temperature_Forecast.html"
        class="toggle-btn"
        title="Min/Max Temp"
        ><i class="fas fa-temperature-high"></i
      ></a>
      <a href="forecast.html" class="toggle-btn" title="7-Day Forecast"
        ><i class="fas fa-calendar-day"></i
      ></a>
      <a href="warning.html" class="toggle-btn" title="7-Day Warning"
        ><i class="fas fa-exclamation-triangle"></i
      ></a>
      <a href="bulletin_footer.html" class="toggle-btn" title="Bulletin Footer"
        ><i class="fas fa-file-signature"></i
      ></a>
      <a
        href="test_temp_data.html"
        class="toggle-btn active"
        title="Test Temp Data"
        ><i class="fas fa-table"></i
      ></a>
    </div>

    <!-- Table 1: Observed Temperature & Rainfall -->
    <div class="table-section">
      <h2>1. Observed Temperature & Rainfall Table</h2>
      <button class="copy-btn" onclick="copyTable('obsTable')">
        Copy Table
      </button>
      <span id="msg-obsTable" class="success-msg"
        >Table Copied Successfully!</span
      >

      <table id="obsTable">
        <thead>
          <tr class="obs-header">
            <th>DISTRICT</th>
            <th>STATION</th>
            <th>Max Temp (°C)</th>
            <th>Min Temp (°C)</th>
            <th>RH (%)</th>
            <th>Rainfall (mm)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="col-dist">PATNA</td>
            <td class="col-dist">Patna</td>
            <td class="col-max">34.5</td>
            <td class="col-min">24.2</td>
            <td class="col-rh">76</td>
            <td class="col-rain">0.0</td>
          </tr>
          <tr>
            <td class="col-dist">GAYA</td>
            <td class="col-dist">Gaya</td>
            <td class="col-max">35.2</td>
            <td class="col-min">23.8</td>
            <td class="col-rh">72</td>
            <td class="col-rain">0.0</td>
          </tr>
          <tr>
            <td class="col-dist">BHAGALPUR</td>
            <td class="col-dist">Bhagalpur</td>
            <td class="col-max">33.8</td>
            <td class="col-min">25.0</td>
            <td class="col-rh">80</td>
            <td class="col-rain">2.4</td>
          </tr>
          <tr>
            <td class="col-dist">PURNEA</td>
            <td class="col-dist">Purnea</td>
            <td class="col-max">32.5</td>
            <td class="col-min">24.5</td>
            <td class="col-rh">85</td>
            <td class="col-rain">12.6</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Table 2: District Wise Temperature Forecast -->
    <div class="table-section">
      <h2>2. District Wise Temperature Forecast Table</h2>
      <button class="copy-btn" onclick="copyTable('fcTable')">
        Copy Table
      </button>
      <span id="msg-fcTable" class="success-msg"
        >Table Copied Successfully!</span
      >

      <table id="fcTable">
        <thead>
          <tr class="fc-header">
            <th>SECTOR</th>
            <th>DISTRICT</th>
            <th>PARAM</th>
            <th>Day 1</th>
            <th>Day 2</th>
            <th>Day 3</th>
            <th>Day 4</th>
            <th>Day 5</th>
            <th>Day 6</th>
            <th>Day 7</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td rowspan="2" class="fc-sector">North West</td>
            <td rowspan="2" class="fc-dist">
              West Champaran, East Champaran, Siwan, Saran, Gopalganj
            </td>
            <td class="fc-param-max">Max</td>
            <td>34</td>
            <td>35</td>
            <td>35</td>
            <td>34</td>
            <td>33</td>
            <td>33</td>
            <td>34</td>
          </tr>
          <tr>
            <td class="fc-param-min">Min</td>
            <td>24</td>
            <td>25</td>
            <td>25</td>
            <td>24</td>
            <td>23</td>
            <td>23</td>
            <td>24</td>
          </tr>
          <tr>
            <td rowspan="2" class="fc-sector">North Central</td>
            <td rowspan="2" class="fc-dist">
              Sitamarhi, Madhubani, Muzaffarpur, Darbhanga, Vaishali, Sheohar,
              Samastipur
            </td>
            <td class="fc-param-max">Max</td>
            <td>33</td>
            <td>34</td>
            <td>34</td>
            <td>33</td>
            <td>32</td>
            <td>32</td>
            <td>33</td>
          </tr>
          <tr>
            <td class="fc-param-min">Min</td>
            <td>23</td>
            <td>24</td>
            <td>24</td>
            <td>23</td>
            <td>22</td>
            <td>22</td>
            <td>23</td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      function copyTable(tableId) {
        const table = document.getElementById(tableId);
        if (!table) return;

        // Logic to handle rowspans and create a clean tab-separated string
        let grid = [];
        let maxCols = 0;

        for (let r = 0; r < table.rows.length; r++) {
          if (!grid[r]) grid[r] = [];
          const row = table.rows[r];
          let c = 0;
          for (let cell of row.cells) {
            while (grid[r][c] !== undefined) c++;
            const rowspan = cell.rowSpan || 1;
            const colspan = cell.colSpan || 1;
            const text = cell.innerText.replace(/(\r\n|\n|\r)/gm, " ").trim();
            for (let i = 0; i < rowspan; i++) {
              for (let j = 0; j < colspan; j++) {
                if (!grid[r + i]) grid[r + i] = [];
                grid[r + i][c + j] = i === 0 && j === 0 ? text : "";
              }
            }
            c += colspan;
          }
          if (c > maxCols) maxCols = c;
        }

        let text = "";
        for (let r = 0; r < grid.length; r++) {
          let rowData = [];
          for (let c = 0; c < maxCols; c++) {
            rowData.push(grid[r][c] || "");
          }
          text += rowData.join("\t") + "\n";
        }

        navigator.clipboard
          .writeText(text)
          .then(() => {
            const msg = document.getElementById("msg-" + tableId);
            if (msg) {
              msg.style.display = "inline";
              setTimeout(() => (msg.style.display = "none"), 2000);
            }
          })
          .catch((err) => {
            console.error("Failed to copy", err);
            alert("Failed to copy table");
          });
      }
    </script>
  </body>
</html>
